function add_line_number(e){for(var t=$(e).height(),a=Math.round(t/32),r=lines_count+1;r<=a+lines_count;r++)$(e+" .line_count").append(r+"<br />");lines_count+=a}function add_quote(e,t,a,r){var s="";a<100&&(s="large"),a<200&&a>100&&(s="regular"),a>200&&(s="small"),quotes_count++;var n="quote_"+quotes_count,d=new Date,u=((""+d.getHours()).length<2?"0":"")+d.getHours(),o=((""+d.getMinutes()).length<2?"0":"")+d.getMinutes(),l=((""+d.getSeconds()).length<2?"0":"")+d.getSeconds(),c="<br /><date class='"+current_theme+"'>["+u+":"+o+":"+l+"]</date><author>"+r+"</author>",h="<tr id='"+n+"'><td class='line_count'></td><td class='quote "+s+"'>"+t+c+"<br /><br /></td></tr>";$(h).appendTo("#quote_table tbody").hide().fadeIn(),add_line_number("#"+n)}function chat_reader(e,t){if($("#timer-bar svg").animate({"stroke-dashoffset":"204.24"},0),null!=e[t].text){var a=e[t].text.length,r=100*a,s=e.length-1;add_quote(t,e[t].text,a,e[t].author)}$("#quotes-count").html('<span class="index">'+(t+1)+'</span>/<span class="total">'+(s+1)),$("#timer-bar svg").animate({"stroke-dashoffset":"0"},r),t<s?setTimeout(function(){t++,chat_reader(e,t)},r):setTimeout(function(){current_theme="",query()},r)}function load_quotes(e){if($("#loader").addClass("active"),void 0===themes_already_used){var t={chat:"query"};console.log("themes_already_used not defined")}else var t={chat:"query",themes:JSON.stringify(themes_already_used)};$.ajax({url:"data/index.php",type:"GET",data:t,dataType:"json",success:e,complete:function(e,t){$("#loader").removeClass("active")}})}function query(){load_quotes(function(e){$("#timer-bar #current-theme").removeClass("glitched");themes_already_used=e.themes,current_theme=themes_already_used[themes_already_used.length-1];var t="<div class='theme'>"+current_theme+"</div>";$("#timer-bar #current-theme").html(t+t+t),$("#timer-bar #current-theme").addClass("glitched"),$("body").removeClass(),$("body").addClass(current_theme),chat_reader(e.texts,0,themes_already_used)})}var current_theme="",quotes_count=0,lines_count=0,themes_already_used=[];$(document).ready(function(){query(themes_already_used)});