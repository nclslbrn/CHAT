function add_line_number(e){for(var t=$(e).height(),a=Math.round(t/32),s=lines_count+1;s<=a+lines_count;s++)$(e+" .line_count").append(s+"<br />");lines_count+=a}function add_quote(e,t,a,s){var n="";a<100&&(n="large"),a<200&&a>100&&(n="regular"),a>200&&(n="small"),quotes_count++;var o="quote_"+quotes_count,d=new Date,u=((""+d.getHours()).length<2?"0":"")+d.getHours(),r=((""+d.getMinutes()).length<2?"0":"")+d.getMinutes(),l=((""+d.getSeconds()).length<2?"0":"")+d.getSeconds(),_="<br /><date>["+u+":"+r+":"+l+"]</date><author>"+s+"</author>",i="<tr id='"+o+"'><td class='line_count'></td><td class='quote "+n+"'>"+t+_+"<br /><br /></td></tr>";$(i).appendTo("#quote_table tbody").hide().fadeIn(),add_line_number("#"+o)}function chat_reader(e,t){if($("#timer-bar svg").animate({"stroke-dashoffset":"204.24"},0),null!=e[t].text){var a=e[t].text.length,s=100*a,n=e.length-1;add_quote(t,e[t].text,a,e[t].author)}$("#quotes-count").html('<span class="index">'+(t+1)+'</span>/<span class="total">'+(n+1)),$("#timer-bar svg").animate({"stroke-dashoffset":"0"},s),t<n?setTimeout(function(){t++,chat_reader(e,t)},s):setTimeout(function(){query()},s)}function load_quotes(e){if($("#loader").addClass("active"),void 0===themes_already_used){var t={chat:"query"};console.log("themes_already_used not defined")}else var t={chat:"query",themes:JSON.stringify(themes_already_used)};$.ajax({url:"data/index.php",type:"GET",data:t,dataType:"json",success:e,complete:function(e,t){$("#loader").removeClass("active")}})}function query(){load_quotes(function(e){themes_already_used=e.themes;var t=themes_already_used[themes_already_used.length-1];$("#timer-bar .theme").html(t),console.log(themes_already_used),chat_reader(e.texts,0,themes_already_used)})}var quotes_count=0,lines_count=0,themes_already_used=[];$(document).ready(function(){query(themes_already_used)});